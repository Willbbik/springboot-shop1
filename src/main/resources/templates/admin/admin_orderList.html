<!DOCTYPE html>
<html lang="en" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="_csrf" th:content="${_csrf.token}" />
    <meta name="_csrf_header" th:content="${_csrf.headerName}" />
    <title>에게모니</title>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="/assets/css/common/sidebar.css">
    <link rel="stylesheet" href="/assets/css/common/paging.css">

</head>
<body>


<div id="page-wrapper">
    <!-- 사이드바 -->
    <div id="sidebar-wrapper">
        <ul class="sidebar-nav">
            <li class="sidebar-brand">
                <p>관리자 페이지</p>
                <a href="/">에게모니</a>
            </li>
            <input type="text" class="form-control me-2" placeholder="검색" maxlength="20"/>
            <br/>
            <p class="acountbuttons" style="text-align: center;">
                <span sec:authorize="isAuthenticated()"><a th:href="@{/logout}">로그아웃</a></span>
            </p>
            <li>-</li>
            <br/>
            <li><a th:href="@{/admin/register}">상품 등록</a></li>
            <li><a th:href="@{/admin/itemList}">등록된 상품 목록</a></li>
            <li>-</li>
            <br/>
            <li><a th:href="@{/admin/send/orderItem}">상품 배송</a></li>
            <li><a th:href="@{/admin/orderList}">주문 목록</a></li>
            <li>-</li>
            <br/>
            <li><a th:href="@{/board/list/all}">공지사항</a></li>
            <li><a th:href="@{/admin/write/notice}">공지사항 글쓰기</a></li>
            <li>-</li>
            <br/>
        </ul>
    </div>
    <!-- /사이드바 -->
    <div id="page-content-wrapper">
        <div class="container-fluid">
            <!-- 본문 -->
            <section>
                <h1>주문 목록</h1>
                <form th:action="@{/admin/orderList}" id="search-form" method="get">
                    <div class="form-group">
                        <label class="form-label">주문상태</label>
                        <span>
                            <select name="deliveryStatus">
                                <option value="whole">전체</option>
                                <option value="입금대기" th:selected="${#strings.equals( searchDto.deliveryStatus, '입금대기' )}">입금대기</option>
                                <option value="입금금액부족" th:selected="${#strings.equals( searchDto.deliveryStatus, '입금금액부족' )}">입금금액부족</option>
                                <option value="입금완료" th:selected="${#strings.equals( searchDto.deliveryStatus, '입금완료' )}">입금완료</option>
                                <option value="배송준비중" th:selected="${#strings.equals( searchDto.deliveryStatus, '배송준비중' )}">배송준비중</option>
                                <option value="배송중" th:selected="${#strings.equals( searchDto.deliveryStatus, '배송중' )}">배송중</option>
                                <option value="배송완료" th:selected="${#strings.equals( searchDto.deliveryStatus, '배송완료' )}">배송완료</option>
                                <option value="주문취소" th:selected="${#strings.equals( searchDto.deliveryStatus, '주문취소' )}">주문취소</option>
                            </select>
                        </span>
                    </div>
                    <div class="form-group">
                        <label class="form-label">선택</label>
                        <span>
                            <select name="keyType">
                                <option value="whole">전체</option>
                                <option value="customerName">구매자명</option>
                                <option value="orderNum">주문번호</option>
                            </select>
                            <input type="text" name="keyValue" class="search-input">
                        </span>
                    </div>
                    <div class="search-submit-box">
                        <input type="submit" class="search-submit" value="검색">
                    </div>
                </form>
                <div class="order-box">
                    <table class="order-table">
                        <colgroup>
                            <col width="10%"/>
                            <col width="35%"/>
                            <col width="10%"/>
                            <col width="15%"/>
                            <col width="10%"/>
                            <col width="10%"/>
                            <col width="15%"/>
                        </colgroup>
                        <thead>
                            <tr>
                                <th>구매자</th>
                                <th>주문정보</th>
                                <th>결제금액</th>
                                <th>결제방식</th>
                                <th>입금일자</th>
                                <th>상태</th>
                                <th>변경</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="order : ${orderItems}">
                                <td th:text="${order.order.delivery.deliveryAddress.customerName}"></td>
                                <td th:text="${order.item.itemName}"></td>
                                <td th:text="${order.totalPrice}"></td>
                                <td th:text="${order.order.payType.getTitle}"></td>
                                <td th:text="${order.order.depositDate}"></td>
                                <td>
                                    <select name="change-deliveryStatus" class="omode">
                                        <option value="입금대기" th:selected="${#strings.equals( order.deliveryStatus.getValue, '입금대기' )}">입금대기</option>
                                        <option value="입금금액부족" th:selected="${#strings.equals( order.deliveryStatus.getValue, '입금금액부족' )}">입금금액부족</option>
                                        <option value="입금완료" th:selected="${#strings.equals( order.deliveryStatus.getValue, '입금완료' )}">입금완료</option>
                                        <option value="배송준비중" th:selected="${#strings.equals( order.deliveryStatus.getValue, '배송준비중' )}">배송준비중</option>
                                        <option value="배송중" th:selected="${#strings.equals( order.deliveryStatus.getValue, '배송중' )}">배송중</option>
                                        <option value="배송완료" th:selected="${#strings.equals( order.deliveryStatus.getValue, '배송완료' )}">배송완료</option>
                                        <option value="주문취소" th:selected="${#strings.equals( order.deliveryStatus.getValue, '주문취소' )}">주문취소</option>
                                    </select>
                                </td>
                                <td>
                                    <input type="button" value="변경" class="changestatusbtn">
                                </td>
                            </tr>
                        </tbody>
                    </table>
<!--                    <div class="paginate">-->
<!--                        <ul class="pagination justify-content-center">-->
<!--                            <li class="page-item" th:classappend="${1 == orderList.pageable.pageNumber + 1} ? 'disabled'">-->
<!--                                <a class="page-link" href="#" th:href="@{/admin/orderList(page=${orderList.pageable.pageNumber - 1},firstdate=${firstDate},lastdate=${lastDate},omode=${oMode},smode=${sMode},sinput=${sInput})}" tabindex="-1" aria-disabled="true">Previous</a>-->
<!--                            </li>-->

<!--                            <li class="page-item" th:classappend="${i == orderList.pageable.pageNumber + 1} ? 'disabled'" th:each="i : ${#numbers.sequence(startPage, endPage)}">-->
<!--                                <a class="page-link" href="#" th:href="@{/admin/orderList(page=${i - 1},firstdate=${firstDate},lastdate=${lastDate},omode=${oMode},smode=${sMode},sinput=${sInput})}" th:text="${i}">1</a></li>-->

<!--                            <li class="page-item" th:classappend="${orderList.totalPages == orderList.pageable.pageNumber + 1} ? 'disabled'">-->
<!--                                <a class="page-link" href="#" th:href="@{/admin/orderList(page=${orderList.pageable.pageNumber + 1},firstdate=${firstDate},lastdate=${lastDate},omode=${oMode},smode=${sMode},sinput=${sInput})}">Next</a>-->
<!--                            </li>-->
<!--                        </ul>-->
<!--                    </div>-->
                </div>
            </section>
            <!-- /본문 -->
        </div>
    </div>


</div>

<script src="https://code.jquery.com/jquery-latest.min.js"></script>
<script src="/assets/js/admin/admin_itemList.js"></script>

</body>
</html>
